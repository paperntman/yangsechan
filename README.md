# 마인크래프트 양세찬 게임 플러그인 설계도

## 1. 게임 개요
SBS '런닝맨'에서 유래한 인물 맞히기 게임 '양세찬 게임'을 마인크래프트와 디스코드를 연동하여 구현한 플러그인. 플레이어는 다른 사람들이 정해준 자신의 단어를, 질문을 통해 유추하여 맞혀야 한다. 핵심은 마이크를 통해 직접 정답을 외치고, 다른 플레이어들이 이를 심판하는 사회적 상호작용에 있다.

---

## 2. 핵심 시스템
### 2.1. Discord 연동
- **필수 조건:** 서버에 참가하는 모든 플레이어는 자신의 마인크래프트 계정과 디스코드 계정이 사전에 연동되어 있어야 한다.
- **주요 기능:** 플러그인은 디스코드 API를 통해 특정 플레이어의 **헤드셋 음소거(Deafen)** 상태를 제어할 수 있다.

### 2.2. 플레이어 행동 인식
- **`끄덕임` (고개 끄덕이기):** 긍정, 동의, 투표, 턴 넘기기 등 다용도로 사용되는 핵심 긍정 액션.
- **`도리도리` (고개 좌우로 흔들기):** 부정, 반대, 투표 등 핵심 부정 액션.
- **`무응답`:** 플레이어가 `끄덕임` 또는 `도리도리` 행동을 취하기 전의 기본 상태.

---

## 3. 게임 페이즈 (Game Phases)

### 3.1. 1단계: 플레이어 모집
1.  **시작:** 관리자 또는 첫 플레이어가 `/양세찬게임` 명령어를 입력한다.
2.  **참여:** 채팅창에 클릭 가능한 참여 버튼이 생성된다. 게임에 참여하고 싶은 플레이어는 이 버튼을 클릭한다.
3.  **마감:** 일정 시간이 지나거나, 관리자가 게임 시작 명령을 내리면 모집이 마감된다.

### 3.2. 2단계: 단어 선정 (전체 플레이어 대상 반복)
*   **TARGET 설정:** 게임에 참여한 플레이어 중 한 명을 `TARGET`으로 지정한다.

1.  **TARGET 헤드셋 음소거:**
    - 플러그인이 디스코드 API를 호출하여 `TARGET` 플레이어의 **헤드셋을 음소거(Deafen)** 처리한다.
    - `TARGET`은 이후의 단어 선정 토론 내용을 들을 수 없게 된다.

2.  **단어 회의 및 제안:**
    - `TARGET`을 제외한 플레이어들은 디스코드 음성 및 인게임 채팅으로 `TARGET`의 단어를 자유롭게 토론한다.
    - 토론 후 한 플레이어가 인게임 채팅창에 단어를 제시하여 투표를 시작한다. (예: `[제안] 유재석`)

3.  **단어 선정 투표:**
    - `TARGET`을 제외한 모든 플레이어는 제안된 단어에 대해 `끄덕임`(찬성) 또는 `도리도리`(반대)로 투표한다.

4.  **판정 로직:**
    - **자동 확정:** `도리도리` 상태의 플레이어가 **한 명도 없고**, `끄덕임` 상태의 플레이어가 **과반수**를 넘으면, 5초의 카운트다운 후 단어가 자동으로 확정된다.
    - **집행 유예:** `도리도리` 상태의 플레이어가 **한 명이라도** 나타나면, 자동 확정 카운트다운은 즉시 중단된다.
    - **기각:** `도리도리` 상태의 플레이어가 **과반수**를 넘으면, 제안된 단어는 자동으로 기각된다.
    - **미확정 시:** 단어가 기각되거나 확정되지 않으면 2번(단어 회의)으로 돌아간다.

5.  **선정 완료:**
    - 단어가 확정되면 해당 단어를 `TARGET`의 정답으로 저장한다.
    - 플러그인은 `TARGET`의 **헤드셋 음소거를 해제**한다.
    - 모든 플레이어의 단어 선정이 끝날 때까지 위 과정을 반복한다.

### 3.3. 3단계: 게임 진행 (메인 루프)
*   **TARGET 설정:** 순서에 따라 플레이어 한 명을 `TARGET`으로 지정한다.

1.  **정보 표시:**
    - `TARGET`을 제외한 모든 플레이어의 화면에 `TARGET`의 정답 단어를 **타이틀(Title)**로 띄워준다.

2.  **질문과 답변:**
    - `TARGET`은 디스코드 음성 채팅을 통해 다른 플레이어들에게 자신의 단어에 대한 힌트를 얻기 위한 질문을 한다.
    - 이 단계에서는 **모든 플레이어의 마이크와 헤드셋이 정상 작동**한다.

3.  **턴 종료 방식:**
    - **A. 정답 시도:** `TARGET`이 정답을 알았다고 생각하면 `/정답` 명령어를 입력한다. (→ **3.4단계**로 이동)
    - **B. 수동 턴 넘기기:** `TARGET`이 더 이상 질문할 것이 없으면 `끄덕임` 행동을 하여 자신의 턴을 종료한다. 다음 플레이어에게 턴이 넘어간다.

### 3.4. 4단계: 정답 외치기 및 심판
1.  **정답 시도 선언:**
    - `TARGET`이 자신의 턴에 `/정답` 명령어를 입력한다.

2.  **시각적 알림:**
    - 플러그인은 모든 플레이어 화면의 **타이틀 색상을 강조색(예: 노란색)**으로 변경한다.
    - **서브타이틀**에 **"`<TARGET>` 님이 정답을 외칩니다! 모두 주목해주세요!"** 메시지를 출력한다.

3.  **정답 외치기:**
    - `TARGET`은 디스코드 음성 채팅을 통해 마이크로 직접 정답을 외친다.

4.  **심판 투표:**
    - `TARGET`을 제외한 모든 플레이어(심판)는 방금 들은 정답이 맞는지 판단하여 `끄덕임`(정답) 또는 `도리도리`(오답)로 투표한다.

5.  **심판 판정 로직:**
    - **`3.2단계`의 단어 선정 판정 로직과 동일하게** 작동한다.
    - 과반수, 집행 유예, 기각 규칙이 그대로 적용된다.

6.  **결과 처리:**
    - **정답:** `TARGET`은 '성공' 상태로 전환되며, 이후 턴에서 제외된다. 다음 플레이어에게 턴이 넘어간다.
    - **오답:** `TARGET`의 턴이 즉시 종료되고, 다음 플레이어에게 턴이 넘어간다.

---

## 4. 게임 종료
- 게임에 참여한 **모든 플레이어**가 '성공' 상태가 되면 게임이 최종적으로 종료되며, 순위나 결과를 발표한다.

---

## 5. 명령어 요약
- `/양세찬게임`: 게임 방을 생성하고 플레이어 모집을 시작한다.
- `/정답`: 자신의 턴에 정답을 외치기 위해 심판 페이즈를 시작하는 명령어.